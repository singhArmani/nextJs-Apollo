const typeDefs = `
    type Link {
        _id: String # mongoDb autogenerated id
        title: String
        url: String
    }

    type Store {
        links: [Link]
    }

    # the schema allows the following query: 
    type Query {
        store: Store
    }

    # we need to tell the server which types represent the root query
    # and root mutation types. We call them RootQuery and RootMutation by convention.
    schema {
        query: Query
    }
`

// db is the mongo db object
function getResolver(db) {
        const resolvers = {
        Query: {
            store() {
                return ({});
            },
        },
        Store: {
            links() {
                return db.collection('links').find({}).toArray()
            }
        }
    }
    return resolvers
}

module.exports = {
    typeDefs,
    getResolver
}
